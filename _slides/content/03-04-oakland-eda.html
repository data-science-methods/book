<!DOCTYPE html>
<html lang="en"><head>
<script src="03-04-oakland-eda_files/libs/clipboard/clipboard.min.js"></script>
<script src="03-04-oakland-eda_files/libs/quarto-html/tabby.min.js"></script>
<script src="03-04-oakland-eda_files/libs/quarto-html/popper.min.js"></script>
<script src="03-04-oakland-eda_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="03-04-oakland-eda_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="03-04-oakland-eda_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="03-04-oakland-eda_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="03-04-oakland-eda_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.433">

  <title>oakland-eda</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="03-04-oakland-eda_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="03-04-oakland-eda_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="03-04-oakland-eda_files/libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="../slides.css">
  <link href="03-04-oakland-eda_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="03-04-oakland-eda_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="03-04-oakland-eda_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="03-04-oakland-eda_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="03-04-oakland-eda_files/libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
  <script src="03-04-oakland-eda_files/libs/plotly-binding-4.10.2/plotly.js"></script>
  <script src="03-04-oakland-eda_files/libs/typedarray-0.1/typedarray.min.js"></script>
  <script src="03-04-oakland-eda_files/libs/jquery-3.5.1/jquery.min.js"></script>
  <link href="03-04-oakland-eda_files/libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
  <script src="03-04-oakland-eda_files/libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
  <link href="03-04-oakland-eda_files/libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
  <script src="03-04-oakland-eda_files/libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section>
<section id="case-study-police-stops-in-oakland" class="title-slide slide level1 center">
<h1>Case Study: Police Stops in Oakland</h1>

</section>
<section id="section" class="slide level2">
<h2><br></h2>
<ul>
<li>For this EDA, we’ll work with data on police stops in Oakland, California, that have been pre-cleaned and released by the <a href="https://openpolicing.stanford.edu/">Stanford Open Policing Project</a> <span class="citation" data-cites="PiersonLargescaleAnalysisRacial2020">(<a href="#/references" role="doc-biblioref" onclick="">Pierson et al. 2020</a>)</span>.</li>
<li>We’ll be following the checklist from <span class="citation" data-cites="PengArtDataScience2016">Peng and Matsui (<a href="#/references" role="doc-biblioref" onclick="">2016</a>)</span>.</li>
<li>We’ll also be learning to use the <code>skimr</code> and <code>visdat</code> packages</li>
</ul>
</section>
<section id="pengartdatascience2016" class="slide level2">
<h2><span class="citation" data-cites="PengArtDataScience2016">Peng and Matsui (<a href="#/references" role="doc-biblioref" onclick="">2016</a>)</span></h2>
<ol type="1">
<li>Formulate your question</li>
<li>Read in your data</li>
<li>Check the packaging</li>
<li>Look at the top and the bottom of your data</li>
<li>Check your “n”s</li>
<li>Validate with at least one external data source</li>
<li>Make a plot</li>
<li>Try the easy solution first</li>
<li>Follow up</li>
</ol>
</section>
<section id="formulate-your-question" class="slide level2">
<h2>1. Formulate your question</h2>
<ul>
<li><p>The Black Lives Matter protests over the last several years have made us aware of the racial aspects of policing.</p></li>
<li><p>Here we’re specifically interested in</p>
<ol type="1">
<li><em>Whether Black people in Oakland might be more likely to be stopped than White people</em></li>
<li><em>Whether Black people who are stopped might be more likely to have contraband</em></li>
</ol></li>
<li><p>These aren’t very precise, but that’s okay: Part of the goal of EDA is to clarify and refine our research questions</p></li>
</ul>
<!-- ## Reflexivity {.smaller} -->
<!-- 1. Whether Black people in Oakland might be more likely to be stopped than White people -->
<!-- 2. Whether Black people who are stopped might be more likely to have contraband -->
<!-- - Once we have a rough idea of *what* we want to know, we need to take a moment to think about *why* we want to know it -->
<!--     - Clarify what "success" means to us -->

<!--     - Share with others to whom we're accountable -->
<!--     - Recognize that we (academic researchers) often lack accountability to people who might be affected by our work -->
<!--     - **especially when we claim to be acting for their benefit** -->
<!-- - We'll spend 3 minutes writing responses to each of these questions:  -->
<!-- 1. What do I already know about this subject?  -->
<!-- 2. Why am I studying this?  -->
<!-- 3. What do I expect or hope to find/learn, and why?  -->
<!-- 4. Who and what is affected by this topic? How can I respect them through the work I’m about to do?  -->
<!-- [Adapted from @TanweerWhyDataRevolution2021, 14-15, and @LiboironPollutionColonialism2021] -->
</section>
<section id="set-up-our-workspace" class="slide level2">
<h2>Set up our workspace</h2>
<ul>
<li>Dedicated project folder</li>
<li>Optional: Create an RStudio Project</li>
<li>Clean R session</li>
<li>More on project management and organization later in the semester</li>
</ul>
</section>
<section id="packages" class="slide level2">
<h2>Packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)   <span class="co"># for working with the data</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(lubridate)   <span class="co"># for working with datetime data</span></span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(skimr)       <span class="co"># generate a text-based overview of the data</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(visdat)      <span class="co"># generate plots visualizing data types and missingness</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(plotly)      <span class="co"># quickly create interactive plots</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="get-the-data" class="slide level2 smaller">
<h2>Get the Data</h2>
<ul>
<li><p>We’ll be using data on police stops in Oakland, California, collected and published by the <a href="https://openpolicing.stanford.edu/">Stanford Open Policing Project</a>.</p></li>
<li><p>For reproducibility, we’ll write a bit of code that automatically downloads the data</p></li>
<li><p>To get the download URL:</p>
<ol type="1">
<li><a href="https://openpolicing.stanford.edu/data/" class="uri">https://openpolicing.stanford.edu/data/</a></li>
<li>Scroll down to Oakland</li>
<li>Right-click on the file symbol to copy the URL</li>
</ol></li>
<li><p>README: <a href="https://github.com/stanford-policylab/opp/blob/master/data_readme.md" class="uri">https://github.com/stanford-policylab/opp/blob/master/data_readme.md</a>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>data_dir <span class="ot">=</span> <span class="st">'data'</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>target_file <span class="ot">=</span> <span class="fu">file.path</span>(data_dir, <span class="st">'oakland.zip'</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(data_dir)) {</span>
<span id="cb2-5"><a href="#cb2-5"></a>    <span class="fu">dir.create</span>(data_dir)</span>
<span id="cb2-6"><a href="#cb2-6"></a>}</span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(target_file)) {</span>
<span id="cb2-8"><a href="#cb2-8"></a>    <span class="fu">download.file</span>(<span class="st">'https://stacks.stanford.edu/file/druid:yg821jf8611/yg821jf8611_ca_oakland_2020_04_01.csv.zip'</span>, </span>
<span id="cb2-9"><a href="#cb2-9"></a>                  target_file)</span>
<span id="cb2-10"><a href="#cb2-10"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="read-in-your-data" class="slide level2">
<h2>2. Read in your data</h2>
<p>The dataset is a zipped <code>csv</code> or comma-separated value file. CSVs are structured like Excel spreadsheets, but are stored in plain text rather than Excel’s format.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>dataf <span class="ot">=</span> <span class="fu">read_csv</span>(target_file)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="check-the-packaging" class="slide level2">
<h2>3. Check the packaging</h2>
<p><span class="citation" data-cites="PengArtDataScience2016">Peng and Matsui (<a href="#/references" role="doc-biblioref" onclick="">2016</a>)</span> use some base R functions to look at dimensions of the dataframe and column (variable) types. <code>skimr</code> is more powerful.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="do">## May take a couple of seconds</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="fu">skim</span>(dataf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>── Data Summary ────────────────────────
                           Values
Name                       dataf 
Number of rows             133407
Number of columns          28    
_______________________          
Column type frequency:           
  character                16    
  Date                     1     
  difftime                 1     
  logical                  7     
  numeric                  3     
________________________         
Group variables            None  

── Variable type: character ────────────────────────────────────────────────────────────────────────
   skim_variable                 n_missing complete_rate min max empty n_unique whitespace
 1 raw_row_number                        0        1        1  71     0   133407          0
 2 location                             51        1.00     1  78     0    60723          0
 3 beat                              72424        0.457    3  19     0      129          0
 4 subject_race                          0        1        5  22     0        5          0
 5 subject_sex                          90        0.999    4   6     0        2          0
 6 officer_assignment               121431        0.0898   5  97     0       20          0
 7 type                              20066        0.850    9  10     0        2          0
 8 outcome                           34107        0.744    6   8     0        3          0
 9 search_basis                      92250        0.309    5  14     0        3          0
10 reason_for_stop                       0        1       14 197     0      113          0
11 use_of_force_description         116734        0.125   10  10     0        1          0
12 raw_subject_sdrace                    0        1        1   1     0        7          0
13 raw_subject_resultofencounter         0        1        7 213     0      315          0
14 raw_subject_searchconducted           0        1        2  24     0       34          0
15 raw_subject_typeofsearch          52186        0.609    2 112     0      417          0
16 raw_subject_resultofsearch       111633        0.163    5  95     0      298          0

── Variable type: Date ─────────────────────────────────────────────────────────────────────────────
  skim_variable n_missing complete_rate min        max        median     n_unique
1 date                  2          1.00 2013-04-01 2017-12-31 2015-07-19     1638

── Variable type: difftime ─────────────────────────────────────────────────────────────────────────
  skim_variable n_missing complete_rate min    max        median n_unique
1 time                  2          1.00 0 secs 86340 secs 16:12      1439

── Variable type: logical ──────────────────────────────────────────────────────────────────────────
  skim_variable      n_missing complete_rate   mean count                  
1 arrest_made                0         1     0.121  FAL: 117217, TRU: 16190
2 citation_issued            0         1     0.394  FAL: 80836, TRU: 52571 
3 warning_issued             0         1     0.231  FAL: 102545, TRU: 30862
4 contraband_found       92250         0.309 0.149  FAL: 35005, TRU: 6152  
5 contraband_drugs       92250         0.309 0.0844 FAL: 37684, TRU: 3473  
6 contraband_weapons     92250         0.309 0.0299 FAL: 39928, TRU: 1229  
7 search_conducted           0         1     0.309  FAL: 92250, TRU: 41157 

── Variable type: numeric ──────────────────────────────────────────────────────────────────────────
  skim_variable n_missing complete_rate   mean      sd     p0    p25    p50    p75   p100 hist 
1 lat                 114         0.999   37.8  0.0284   37.4   37.8   37.8   37.8   38.1 ▁▁▇▁▁
2 lng                 114         0.999 -122.   0.0432 -122.  -122.  -122.  -122.  -119.  ▇▁▁▁▁
3 subject_age      102724         0.230   33.2 13.3      10     23     29     41     97   ▇▆▃▁▁</code></pre>
</div>
</div>
<ul>
<li>How many rows and columns?</li>
<li>What variables are represented as different variable types?</li>
<li>Are there any types that might indicate parsing problems?</li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>133k rows (observations); 28 columns (variables)</li>
<li>16 variables are handled as characters
<ul>
<li><code>raw_row_number</code> has 1 unique value per row
<ul>
<li>So it’s probably some kind of identifier</li>
</ul></li>
<li><code>subject_race</code> and <code>subject_sex</code> have just 5 and 2 unique values
<ul>
<li>These are probably categorical variables represented as characters</li>
</ul></li>
<li>Similarly with <code>type</code>, <code>outcome</code>, and <code>search_basis</code>
<ul>
<li>Though these have lots of missing values (high <code>n_missing</code>, low <code>complete_rate</code>)</li>
</ul></li>
</ul></li>
<li>1 variable represents the date, and another is <code>difftime</code>
<ul>
<li><code>?difftime</code> tells us that <code>difftime</code> is used to represent intervals or “time differences”</li>
</ul></li>
<li>7 logical variables
<ul>
<li>A lot of these look like coded outcomes that we might be interested in, eg, <code>search_conducted</code> and <code>contraband_found</code></li>
<li><code>search_conducted</code> has no missing values, but <code>contraband_found</code> has a lot of missing values</li>
</ul></li>
</ul>
</section>
<section id="for-our-motivating-questions" class="slide level2">
<h2>For our motivating questions</h2>
<ul>
<li>Good: <code>subject_race</code> is 100% complete</li>
<li>Also good: <code>search_conducted</code> is also 100% complete</li>
<li>Potentially worrisome: <code>contraband_found</code> is only 31% complete</li>
</ul>
</section>
<section id="missing-values" class="slide level2">
<h2>Missing values</h2>
<ul>
<li>Let’s use <code>visdat::vis_miss()</code>to
<ul>
<li>visualize missing values and</li>
<li>check what’s up with <code>contraband_found</code>.</li>
</ul></li>
</ul>
<p><br>
But this raises an error about large data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">vis_miss</span>(dataf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `test_if_large_data()`:
! Data exceeds recommended size for visualisation
Consider downsampling your data with `dplyr::slice_sample()`
Or set argument, `warn_large_data` = `FALSE`</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p>So we’ll use <code>sample_n()</code> to draw a subset</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">set.seed</span>(<span class="dv">2021-09-28</span>)</span>
<span id="cb8-2"><a href="#cb8-2"></a>dataf_smol <span class="ot">=</span> <span class="fu">sample_n</span>(dataf, <span class="dv">1000</span>)</span>
<span id="cb8-3"><a href="#cb8-3"></a></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="fu">vis_miss</span>(dataf_smol)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="03-04-oakland-eda_files/figure-revealjs/unnamed-chunk-7-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<p>Arguments in vis_miss() are useful for picking up patterns in missing values</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="do">## cluster = TRUE uses hierarchical clustering to order the rows</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="fu">vis_miss</span>(dataf_smol, <span class="at">cluster =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>    <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="03-04-oakland-eda_files/figure-revealjs/unnamed-chunk-8-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<p>Several variables related to search outcomes are missing together</p>
<blockquote>
<p><code>contraband_found</code>, <code>contraband_drugs</code>, <code>contraband_weapons</code>, <code>search_basis</code>, <code>use_of_force_description</code>, <code>raw_subject_typeofsearch</code>, and <code>raw_subject_resultofsearch</code></p>
</blockquote>
<p>However, <code>search_conducted</code> is complete</p>
</section>
<section id="a-critical-question" class="slide level2">
<h2>A critical question</h2>
<p><strong>When a search has been conducted, do we know whether contraband was found?</strong></p>
<ul>
<li>Or: are there cases where a search was conducted, but <code>contraband_found</code> is missing?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>dataf  <span class="sc">|&gt;</span>  </span>
<span id="cb10-2"><a href="#cb10-2"></a>    <span class="fu">filter</span>(search_conducted) <span class="sc">|&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>    <span class="fu">count</span>(search_conducted, <span class="fu">is.na</span>(contraband_found))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  search_conducted `is.na(contraband_found)`     n
  &lt;lgl&gt;            &lt;lgl&gt;                     &lt;int&gt;
1 TRUE             FALSE                     41157</code></pre>
</div>
</div>
</section>
<section id="look-at-the-top-and-the-bottom-of-your-data" class="slide level2 smaller">
<h2>4. Look at the top and the bottom of your data</h2>
<ul>
<li><p>With 28 columns, the dataframe is too wide to print in a readable way.</p></li>
<li><p>Instead we’ll use the base R function <code>View()</code> in an interactive session</p>
<ul>
<li>An Excel-like spreadsheet presentation</li>
</ul></li>
<li><p><code>View()</code> can cause significant problems if you use it with a large dataframe on a slower machine</p>
<ul>
<li>We’ll use a pipe:
<ul>
<li>First extract the <code>head()</code> or <code>tail()</code> of the dataset</li>
<li>Then <code>View()</code> it</li>
</ul></li>
<li>We’ll also use <code>dataf_smol</code></li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="cf">if</span> (<span class="fu">interactive</span>()) {</span>
<span id="cb12-2"><a href="#cb12-2"></a>    dataf <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3"></a>        <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb12-4"><a href="#cb12-4"></a>        <span class="fu">View</span>()</span>
<span id="cb12-5"><a href="#cb12-5"></a>    </span>
<span id="cb12-6"><a href="#cb12-6"></a>    dataf <span class="sc">|&gt;</span> </span>
<span id="cb12-7"><a href="#cb12-7"></a>        <span class="fu">tail</span>() <span class="sc">|&gt;</span> </span>
<span id="cb12-8"><a href="#cb12-8"></a>        <span class="fu">View</span>()</span>
<span id="cb12-9"><a href="#cb12-9"></a>    </span>
<span id="cb12-10"><a href="#cb12-10"></a>    <span class="fu">View</span>(dataf_smol)</span>
<span id="cb12-11"><a href="#cb12-11"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>This is <em>interactive</em> code
<ul>
<li>Don’t want it to run when we run the script automatically or render it to HTML</li>
<li>Use <code>if</code> with <code>interactive()</code> or <code>rlang::is_interactive()</code></li>
</ul></li>
</ul>
</section>
<section class="slide level2">

<p>Some of my observations:</p>
<ul>
<li>The ID variable <code>raw_row_number</code> can’t be turned into a numeric value</li>
<li><code>location</code> is a mix of addresses and intersections (“Bond St @ 48TH AVE”)
<ul>
<li>If we were going to generate a map using this column, geocoding might be tricky</li>
<li>Fortunately we also get latitude and longitude columns</li>
</ul></li>
<li><code>use_of_force_description</code> doesn’t seem to be a descriptive text field; instead it seems to be mostly missing or “handcuffed”</li>
</ul>
</section>
<section class="slide level2">

<p>We can also use <code>skimr</code> to check data quality by looking at the minimum and maximum values. Do these ranges make sense for what we expect the variable to be?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">skim</span>(dataf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>── Data Summary ────────────────────────
                           Values
Name                       dataf 
Number of rows             133407
Number of columns          28    
_______________________          
Column type frequency:           
  character                16    
  Date                     1     
  difftime                 1     
  logical                  7     
  numeric                  3     
________________________         
Group variables            None  

── Variable type: character ────────────────────────────────────────────────────────────────────────
   skim_variable                 n_missing complete_rate min max empty n_unique whitespace
 1 raw_row_number                        0        1        1  71     0   133407          0
 2 location                             51        1.00     1  78     0    60723          0
 3 beat                              72424        0.457    3  19     0      129          0
 4 subject_race                          0        1        5  22     0        5          0
 5 subject_sex                          90        0.999    4   6     0        2          0
 6 officer_assignment               121431        0.0898   5  97     0       20          0
 7 type                              20066        0.850    9  10     0        2          0
 8 outcome                           34107        0.744    6   8     0        3          0
 9 search_basis                      92250        0.309    5  14     0        3          0
10 reason_for_stop                       0        1       14 197     0      113          0
11 use_of_force_description         116734        0.125   10  10     0        1          0
12 raw_subject_sdrace                    0        1        1   1     0        7          0
13 raw_subject_resultofencounter         0        1        7 213     0      315          0
14 raw_subject_searchconducted           0        1        2  24     0       34          0
15 raw_subject_typeofsearch          52186        0.609    2 112     0      417          0
16 raw_subject_resultofsearch       111633        0.163    5  95     0      298          0

── Variable type: Date ─────────────────────────────────────────────────────────────────────────────
  skim_variable n_missing complete_rate min        max        median     n_unique
1 date                  2          1.00 2013-04-01 2017-12-31 2015-07-19     1638

── Variable type: difftime ─────────────────────────────────────────────────────────────────────────
  skim_variable n_missing complete_rate min    max        median n_unique
1 time                  2          1.00 0 secs 86340 secs 16:12      1439

── Variable type: logical ──────────────────────────────────────────────────────────────────────────
  skim_variable      n_missing complete_rate   mean count                  
1 arrest_made                0         1     0.121  FAL: 117217, TRU: 16190
2 citation_issued            0         1     0.394  FAL: 80836, TRU: 52571 
3 warning_issued             0         1     0.231  FAL: 102545, TRU: 30862
4 contraband_found       92250         0.309 0.149  FAL: 35005, TRU: 6152  
5 contraband_drugs       92250         0.309 0.0844 FAL: 37684, TRU: 3473  
6 contraband_weapons     92250         0.309 0.0299 FAL: 39928, TRU: 1229  
7 search_conducted           0         1     0.309  FAL: 92250, TRU: 41157 

── Variable type: numeric ──────────────────────────────────────────────────────────────────────────
  skim_variable n_missing complete_rate   mean      sd     p0    p25    p50    p75   p100 hist 
1 lat                 114         0.999   37.8  0.0284   37.4   37.8   37.8   37.8   38.1 ▁▁▇▁▁
2 lng                 114         0.999 -122.   0.0432 -122.  -122.  -122.  -122.  -119.  ▇▁▁▁▁
3 subject_age      102724         0.230   33.2 13.3      10     23     29     41     97   ▇▆▃▁▁</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p>More observations:</p>
<ul>
<li>Date range is April 1, 2013 to December 31, 2017
<ul>
<li>If we break things down by year, we should expect 2013 to have fewer cases</li>
<li>For some purposes, we might need to exclude 2013 data<br>
<code>filter(dataf, date &gt;= '2014-01-01')</code></li>
</ul></li>
<li>Age range is from 10 years old (!) to 97 (!)
<ul>
<li>Median (<code>p50</code>) is 29; 50% of values are between 23 and 41</li>
<li>For some purposes, we might need to restrict the analysis to working-age adults<br>
<code>filter(dataf, subject_age &gt;= 18, subject_age &lt; 65)</code></li>
</ul></li>
</ul>
</section>
<section id="check-your-ns-and-6.-validate-with-at-least-one-external-data-source" class="slide level2">
<h2>5. Check your Ns (and) 6. Validate with at least one external data source</h2>
<ul>
<li><span class="citation" data-cites="PengArtDataScience2016">Peng and Matsui (<a href="#/references" role="doc-biblioref" onclick="">2016</a>)</span> use an air quality example with a regular sampling rate
<ul>
<li>so they can calculate exactly how many observations they should have</li>
</ul></li>
<li>We can’t do that here
<ul>
<li>So we’ll combine steps 5 and 6 together</li>
</ul></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>A web search leads us to this City of Oakland page on police stop data: <a href="https://www.oaklandca.gov/resources/stop-data" class="uri">https://www.oaklandca.gov/resources/stop-data</a>
<ul>
<li>The page mentions a Stanford study that was released in June 2016</li>
<li>Recall we got our data from the Stanford Open Policing Project</li>
<li>Our data run April 2013 through December 2017</li>
<li>So there’s a good chance we’re using a superset of the “Stanford study” data</li>
<li>Though the links under that section don’t have nice descriptive tables</li>
</ul></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>Let’s try <a href="https://www.oaklandca.gov/resources/historical-stop-data">Historical Stop Data and Reports</a></li>
<li>Then <a href="https://cao-94612.s3.amazonaws.com/documents/OPD-Racial-Impact-Report-2016-2018-Final-16Apr19.pdf">OPD Racial Impact Report: 2016-2018</a>
<ul>
<li>Page 8 has two summary tables that we can compare to our data</li>
</ul></li>
</ul>

<img data-src="images/03-eda/Oakland_report_tables.png" class="r-stretch quarto-figure-center"><p class="caption">Screenshot of the two summary tables from the Oakland report. Source: <a href="https://cao-94612.s3.amazonaws.com/documents/OPD-Racial-Impact-Report-2016-2018-Final-16Apr19.pdf" class="uri">https://cao-94612.s3.amazonaws.com/documents/OPD-Racial-Impact-Report-2016-2018-Final-16Apr19.pdf</a>, page 8</p></section>
<section id="from-dates-to-years" class="slide level2">
<h2>From dates to years</h2>
<ul>
<li>Our data has the particular date of each stop
<ul>
<li>We need to extract the year of each stop
<ul>
<li><code>lubridate::year()</code> does exactly this</li>
</ul></li>
<li>Filter to the years in our data that overlap with the tables</li>
<li>And then aggregate by year and gender using <code>count</code></li>
</ul></li>
</ul>
</section>
<section class="slide level2">

<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>dataf <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2"></a>    <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(date)) <span class="sc">|&gt;</span> </span>
<span id="cb15-3"><a href="#cb15-3"></a>    <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2016</span>, <span class="dv">2017</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb15-4"><a href="#cb15-4"></a>    <span class="fu">count</span>(year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
   year     n
  &lt;dbl&gt; &lt;int&gt;
1  2016 30268
2  2017 30715</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>dataf <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2"></a>    <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(date)) <span class="sc">|&gt;</span> </span>
<span id="cb17-3"><a href="#cb17-3"></a>    <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2016</span>, <span class="dv">2017</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb17-4"><a href="#cb17-4"></a>    <span class="fu">count</span>(year, subject_sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
   year subject_sex     n
  &lt;dbl&gt; &lt;chr&gt;       &lt;int&gt;
1  2016 female       7677
2  2016 male        22563
3  2016 &lt;NA&gt;           28
4  2017 female       7879
5  2017 male        22818
6  2017 &lt;NA&gt;           18</code></pre>
</div>
</div>
</div><div class="column">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/03-eda/Oakland_report_tables.png"></p>
<figcaption>Screenshot of the two summary tables from the Oakland report. Source: <a href="https://cao-94612.s3.amazonaws.com/documents/OPD-Racial-Impact-Report-2016-2018-Final-16Apr19.pdf" class="uri">https://cao-94612.s3.amazonaws.com/documents/OPD-Racial-Impact-Report-2016-2018-Final-16Apr19.pdf</a>, page 8</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section class="slide level2">

<ul>
<li><strong>For both years, we have fewer observations than the report table indicates</strong>
<ul>
<li>Could our data have been pre-filtered?</li>
<li>Let’s check the documentation for our data: <a href="https://github.com/stanford-policylab/opp/blob/master/data_readme.md#oakland-ca" class="uri">https://github.com/stanford-policylab/opp/blob/master/data_readme.md#oakland-ca</a></li>
</ul></li>
</ul>
</section>
<section class="slide level2">

<p>“Data is deduplicated on raw columns contactdate, contacttime, streetname, subject_sdrace, subject_sex, and subject_age, reducing the number of records by ~5.2%”</p>
<ul>
<li>The difference with the report is on this order of magnitude,</li>
<li>But varies within groups by several percentage points</li>
<li>So deduplication <em>might</em> explain the difference</li>
<li>But in a more serious analysis we might want to check, eg, with the Stanford Open Policing folks</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="do">## Men in 2016 in the report vs. our data: 8.2%</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>(<span class="dv">24576</span> <span class="sc">-</span> <span class="dv">22563</span>) <span class="sc">/</span> <span class="dv">24576</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.08190918</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="do">## Women in 2016 in the report vs. our data: 3.6%</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>(<span class="dv">7965</span> <span class="sc">-</span> <span class="dv">7677</span>) <span class="sc">/</span> <span class="dv">7965</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.03615819</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="do">## All of 2016 in the report vs. our data: 7.1%</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>(<span class="dv">32569</span> <span class="sc">-</span> <span class="dv">30268</span>) <span class="sc">/</span> <span class="dv">32569</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.07065</code></pre>
</div>
</div>
</section>
<section id="make-a-plot" class="slide level2">
<h2>7. Make a plot</h2>
<p>Peng and Matsui note that plots are useful for both checking and setting expectations</p>
<ul>
<li>An expectation we formed earlier: fewer stops in 2013</li>
<li>We can combine pipes with <code>ggplot()</code> to get the year</li>
<li><code>geom_bar()</code> gives us counts</li>
<li><em>What’s up with the warnings?</em></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>dataf <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2"></a>    <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(date)) <span class="sc">|&gt;</span> </span>
<span id="cb25-3"><a href="#cb25-3"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(year)) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4"></a>    <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="03-04-oakland-eda_files/figure-revealjs/unnamed-chunk-14-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<p>How about counts per year by race/ethnicity?</p>
<ul>
<li>This version is too hard to read</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>dataf <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2"></a>    <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(date)) <span class="sc">|&gt;</span> </span>
<span id="cb26-3"><a href="#cb26-3"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, <span class="at">fill =</span> subject_race)) <span class="sc">+</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>    <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="03-04-oakland-eda_files/figure-revealjs/unnamed-chunk-15-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<p>Let’s switch from bars to points and lines and change up the color palette</p>
<ul>
<li><em>Why does this produce 2 warnings?</em></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>dataf <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a href="#cb27-2"></a>    <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(date)) <span class="sc">|&gt;</span> </span>
<span id="cb27-3"><a href="#cb27-3"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, <span class="at">color =</span> subject_race)) <span class="sc">+</span></span>
<span id="cb27-4"><a href="#cb27-4"></a>    <span class="fu">geom_point</span>(<span class="at">stat =</span> <span class="st">'count'</span>) <span class="sc">+</span></span>
<span id="cb27-5"><a href="#cb27-5"></a>    <span class="fu">geom_line</span>(<span class="at">stat =</span> <span class="st">'count'</span>) <span class="sc">+</span></span>
<span id="cb27-6"><a href="#cb27-6"></a>    <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">'Set1'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="03-04-oakland-eda_files/figure-revealjs/unnamed-chunk-16-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<p><code>plotly::ggplotly()</code> creates an interactive version of a <code>ggplot</code> object</p>
<ul>
<li><em>Why don’t I need to give it the plot we just created?</em></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">ggplotly</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-c4c927ee41f7940f68c8" style="width:960px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-c4c927ee41f7940f68c8">{"x":{"data":[{"x":[2013,2014,2015,2016,2017],"y":[1022,2274,1673,1586,1543],"text":["count:  1022<br />year: 2013<br />subject_race: asian/pacific islander","count:  2274<br />year: 2014<br />subject_race: asian/pacific islander","count:  1673<br />year: 2015<br />subject_race: asian/pacific islander","count:  1586<br />year: 2016<br />subject_race: asian/pacific islander","count:  1543<br />year: 2017<br />subject_race: asian/pacific islander"],"type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(228,26,28,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(228,26,28,1)"}},"hoveron":"points","name":"asian/pacific islander","legendgroup":"asian/pacific islander","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","line":{"width":1.8897637795275593,"color":"rgba(228,26,28,1)","dash":"solid"},"frame":null},{"x":[2013,2014,2015,2016,2017],"y":[9841,17744,14462,18286,18591],"text":["count:  9841<br />year: 2013<br />subject_race: black","count: 17744<br />year: 2014<br />subject_race: black","count: 14462<br />year: 2015<br />subject_race: black","count: 18286<br />year: 2016<br />subject_race: black","count: 18591<br />year: 2017<br />subject_race: black"],"type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(55,126,184,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(55,126,184,1)"}},"hoveron":"points","name":"black","legendgroup":"black","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","line":{"width":1.8897637795275593,"color":"rgba(55,126,184,1)","dash":"solid"},"frame":null},{"x":[2013,2014,2015,2016,2017],"y":[2911,5824,4694,6162,6666],"text":["count:  2911<br />year: 2013<br />subject_race: hispanic","count:  5824<br />year: 2014<br />subject_race: hispanic","count:  4694<br />year: 2015<br />subject_race: hispanic","count:  6162<br />year: 2016<br />subject_race: hispanic","count:  6666<br />year: 2017<br />subject_race: hispanic"],"type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(77,175,74,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(77,175,74,1)"}},"hoveron":"points","name":"hispanic","legendgroup":"hispanic","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","line":{"width":1.8897637795275593,"color":"rgba(77,175,74,1)","dash":"solid"},"frame":null},{"x":[2013,2014,2015,2016,2017],"y":[489,1113,751,1021,1124],"text":["count:   489<br />year: 2013<br />subject_race: other","count:  1113<br />year: 2014<br />subject_race: other","count:   751<br />year: 2015<br />subject_race: other","count:  1021<br />year: 2016<br />subject_race: other","count:  1124<br />year: 2017<br />subject_race: other"],"type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(152,78,163,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(152,78,163,1)"}},"hoveron":"points","name":"other","legendgroup":"other","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","line":{"width":1.8897637795275593,"color":"rgba(152,78,163,1)","dash":"solid"},"frame":null},{"x":[2013,2014,2015,2016,2017],"y":[1997,4560,3067,3213,2791],"text":["count:  1997<br />year: 2013<br />subject_race: white","count:  4560<br />year: 2014<br />subject_race: white","count:  3067<br />year: 2015<br />subject_race: white","count:  3213<br />year: 2016<br />subject_race: white","count:  2791<br />year: 2017<br />subject_race: white"],"type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(255,127,0,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(255,127,0,1)"}},"hoveron":"points","name":"white","legendgroup":"white","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","line":{"width":1.8897637795275593,"color":"rgba(255,127,0,1)","dash":"solid"},"frame":null}],"layout":{"margin":{"t":30.611872146118724,"r":7.3059360730593621,"b":44.56621004566211,"l":54.794520547945211},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2012.8,2017.2],"tickmode":"array","ticktext":["2013","2014","2015","2016","2017"],"tickvals":[2013,2014,2015,2016,2017],"categoryorder":"array","categoryarray":["2013","2014","2015","2016","2017"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"year","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-416.10000000000002,19496.099999999999],"tickmode":"array","ticktext":["0","5000","10000","15000"],"tickvals":[0,5000,10000,15000],"categoryorder":"array","categoryarray":["0","5000","10000","15000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"count","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"subject_race","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1794550670fa6":{"x":{},"colour":{},"type":"scatter"},"179451e348487":{"x":{},"colour":{}}},"cur_data":"1794550670fa6","visdat":{"1794550670fa6":["function (y) ","x"],"179451e348487":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section class="slide level2">

<ul>
<li>These plots confirm our expectation of lower counts in 2013</li>
<li>Do they help us develop any new expectations as we move on to addressing our research questions?</li>
</ul>
</section>
<section id="try-the-easy-solution-first" class="slide level2">
<h2>8. Try the easy solution first</h2>
<p>Let’s translate our natural-language research questions into statistical questions:</p>
<ol type="1">
<li>Whether Black people in Oakland might be more likely to be stopped than White people</li>
</ol>
<p><span class="math display">\[ \Pr(stopped | Black) \textrm{ vs } \Pr(stopped | White) \]</span></p>
<ol start="2" type="1">
<li>Whether Black people who are stopped might be more likely to have contraband</li>
</ol>
<p><span class="math display">\[ \Pr(contraband | stopped, searched, Black) \textrm{ vs } \Pr(contraband | stopped, searched, White) \]</span> - The easy solution is to estimate probabilities by calculating rates within groups</p>
</section>
<section id="mathematical-aside" class="slide level2">
<h2>Mathematical aside</h2>
<ul>
<li>For Q1, we can’t calculate <span class="math inline">\(\Pr(stopped | Black)\)</span> directly:<br>
everyone in our data was stopped</li>
<li>But Bayes’ theorem lets us get at the comparison indirectly</li>
</ul>
<p><span class="math display">\[ \Pr(stopped | Black) = \frac{\Pr(Black | stopped) \times \Pr(stopped)}{\Pr(Black)} \]</span></p>
<p><span class="math display">\[ \Pr(stopped | Black) : \Pr(stopped | White) = \frac{\Pr(Black|stopped)}{\Pr(Black)} : \frac{\Pr(White|stopped)}{\Pr(White)} \]</span></p>
<ul>
<li><span class="math inline">\(\Pr(Black)\)</span> is the share of the target population that’s Black</li>
<li>If we assume the target population = residents of Oakland, can use Census data</li>
<li><em>Why is this assumption probably false? Is it okay to use it anyways?</em></li>
</ul>
</section>
<section id="stops-by-race" class="slide level2">
<h2>Stops, by race</h2>
<p><span class="math display">\[ \Pr(Black|stopped) \]</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>dataf <span class="sc">|&gt;</span> </span>
<span id="cb29-2"><a href="#cb29-2"></a>    <span class="fu">count</span>(subject_race) <span class="sc">|&gt;</span> </span>
<span id="cb29-3"><a href="#cb29-3"></a>    <span class="fu">mutate</span>(<span class="at">share =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb29-4"><a href="#cb29-4"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(share)) <span class="sc">|&gt;</span> </span>
<span id="cb29-5"><a href="#cb29-5"></a>    <span class="fu">mutate</span>(<span class="at">share =</span> scales<span class="sc">::</span><span class="fu">percent</span>(share, <span class="at">accuracy =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  subject_race               n share
  &lt;chr&gt;                  &lt;int&gt; &lt;chr&gt;
1 black                  78925 59%  
2 hispanic               26257 20%  
3 white                  15628 12%  
4 asian/pacific islander  8099 6%   
5 other                   4498 3%   </code></pre>
</div>
</div>
</section>
<section class="slide level2">

<ul>
<li>Police stop demographics
<ul>
<li>59% of subjects stopped by police are Black</li>
<li>20% are Hispanic</li>
<li>12% are White</li>
<li>6% are API</li>
</ul></li>
<li>Oakland demographics in 2020: <a href="https://en.wikipedia.org/wiki/Oakland,_California#Race_and_ethnicity" class="uri">https://en.wikipedia.org/wiki/Oakland,_California#Race_and_ethnicity</a>
<ul>
<li>24% of residents are Black</li>
<li>27% are Hispanic</li>
<li>27% are non-Hispanic White</li>
<li>16% are Asian</li>
</ul></li>
</ul>
</section>
<section class="slide level2">

<table>
<thead>
<tr class="header">
<th style="text-align: left;">r/e</th>
<th style="text-align: right;">residents</th>
<th style="text-align: right;">stops</th>
<th style="text-align: right;">ratio</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Black</td>
<td style="text-align: right;">24%</td>
<td style="text-align: right;">59%</td>
<td style="text-align: right;">2.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hispanic</td>
<td style="text-align: right;">27%</td>
<td style="text-align: right;">20%</td>
<td style="text-align: right;">0.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">White</td>
<td style="text-align: right;">27%</td>
<td style="text-align: right;">12%</td>
<td style="text-align: right;">0.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">API</td>
<td style="text-align: right;">16%</td>
<td style="text-align: right;">6%</td>
<td style="text-align: right;">0.4</td>
</tr>
</tbody>
</table>
<ul>
<li><em>Blacks are severely overrepresented in police stops</em></li>
<li>Hispanics are slightly underrepresented</li>
<li>White and API folks are significantly underrepresented</li>
</ul>
</section>
<section id="searches-by-race" class="slide level2">
<h2>Searches, by race</h2>
<ul>
<li>What fraction of stops had a search? <span class="math display">\[ \Pr(searched | stopped) \]</span></li>
<li>Are there disparities by race there? <span class="math display">\[ \Pr(searched | stopped, Black) \textrm{ vs } \Pr(searched | stopped, White) \]</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="do">## What fraction of stops had a search? </span></span>
<span id="cb31-2"><a href="#cb31-2"></a>dataf <span class="sc">|&gt;</span> </span>
<span id="cb31-3"><a href="#cb31-3"></a>    <span class="fu">count</span>(search_conducted) <span class="sc">|&gt;</span> </span>
<span id="cb31-4"><a href="#cb31-4"></a>    <span class="fu">mutate</span>(<span class="at">share =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  search_conducted     n share
  &lt;lgl&gt;            &lt;int&gt; &lt;dbl&gt;
1 FALSE            92250 0.691
2 TRUE             41157 0.309</code></pre>
</div>
</div>
<p>Across all subjects, 31% of stops involved a search.</p>
</section>
<section class="slide level2">

<p>Now we break down the search rate by race-ethnicity</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">ggplot</span>(dataf, <span class="fu">aes</span>(subject_race, <span class="at">fill =</span> search_conducted)) <span class="sc">+</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>    <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="fu">position_fill</span>()) <span class="sc">+</span></span>
<span id="cb33-3"><a href="#cb33-3"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">'transparent'</span>, <span class="st">'red'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="03-04-oakland-eda_files/figure-revealjs/unnamed-chunk-20-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>dataf <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a href="#cb34-2"></a>    <span class="fu">count</span>(subject_race, search_conducted) <span class="sc">|&gt;</span> </span>
<span id="cb34-3"><a href="#cb34-3"></a>    <span class="fu">group_by</span>(subject_race) <span class="sc">|&gt;</span> </span>
<span id="cb34-4"><a href="#cb34-4"></a>    <span class="fu">mutate</span>(<span class="at">rate =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb34-5"><a href="#cb34-5"></a>    <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb34-6"><a href="#cb34-6"></a>    <span class="fu">filter</span>(search_conducted) <span class="sc">|&gt;</span> </span>
<span id="cb34-7"><a href="#cb34-7"></a>    <span class="fu">mutate</span>(<span class="at">rate =</span> scales<span class="sc">::</span><span class="fu">percent</span>(rate, <span class="at">accuracy =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  subject_race           search_conducted     n rate 
  &lt;chr&gt;                  &lt;lgl&gt;            &lt;int&gt; &lt;chr&gt;
1 asian/pacific islander TRUE              1304 16%  
2 black                  TRUE             30025 38%  
3 hispanic               TRUE              6722 26%  
4 other                  TRUE               706 16%  
5 white                  TRUE              2400 15%  </code></pre>
</div>
</div>
<ul>
<li>For all groups, most stops didn’t involve a search</li>
<li>For Black subjects, 38% of stops involved a search</li>
<li>For White subjects, 15% of stops involved a search</li>
<li><em>Black subjects were about 2.5x more likely to be searched than White subjects</em></li>
</ul>
</section>
<section id="contraband-finds-by-race" class="slide level2">
<h2>Contraband finds, by race</h2>
<p><span class="math display">\[ \Pr(contraband | searched, stopped, Black) \]</span> We want to <code>filter()</code> down to only stops where a search was conducted</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>dataf <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2"></a>    <span class="fu">filter</span>(search_conducted) <span class="sc">|&gt;</span> </span>
<span id="cb36-3"><a href="#cb36-3"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(subject_race, <span class="at">fill =</span> contraband_found)) <span class="sc">+</span></span>
<span id="cb36-4"><a href="#cb36-4"></a>    <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="fu">position_fill</span>()) <span class="sc">+</span></span>
<span id="cb36-5"><a href="#cb36-5"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">'transparent'</span>, <span class="st">'blue'</span>)) <span class="sc">+</span></span>
<span id="cb36-6"><a href="#cb36-6"></a>    <span class="fu">ylim</span>(<span class="dv">0</span>, .<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="03-04-oakland-eda_files/figure-revealjs/unnamed-chunk-22-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a>dataf <span class="sc">|&gt;</span> </span>
<span id="cb37-2"><a href="#cb37-2"></a>    <span class="fu">filter</span>(search_conducted) <span class="sc">|&gt;</span> </span>
<span id="cb37-3"><a href="#cb37-3"></a>    <span class="fu">count</span>(subject_race, contraband_found) <span class="sc">|&gt;</span> </span>
<span id="cb37-4"><a href="#cb37-4"></a>    <span class="fu">group_by</span>(subject_race) <span class="sc">|&gt;</span> </span>
<span id="cb37-5"><a href="#cb37-5"></a>    <span class="fu">mutate</span>(<span class="at">rate =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb37-6"><a href="#cb37-6"></a>    <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb37-7"><a href="#cb37-7"></a>    <span class="fu">filter</span>(contraband_found) <span class="sc">|&gt;</span> </span>
<span id="cb37-8"><a href="#cb37-8"></a>    <span class="fu">mutate</span>(<span class="at">rate =</span> scales<span class="sc">::</span><span class="fu">percent</span>(rate, <span class="at">accuracy =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  subject_race           contraband_found     n rate 
  &lt;chr&gt;                  &lt;lgl&gt;            &lt;int&gt; &lt;chr&gt;
1 asian/pacific islander TRUE               176 13%  
2 black                  TRUE              4364 15%  
3 hispanic               TRUE              1116 17%  
4 other                  TRUE                85 12%  
5 white                  TRUE               411 17%  </code></pre>
</div>
</div>
<ul>
<li>For Black subjects who were searched, contraband was found 15% of the time</li>
<li>For White subjects, 17% of the time</li>
</ul>
</section>
<section id="results" class="slide level2">
<h2>Results</h2>
<p>This preliminary analysis indicates that</p>
<ul>
<li>Black subjects were more likely to be stopped and searched than White subjects; but,</li>
<li>when they were searched, White subjects were more likely to have contraband.</li>
</ul>
</section>
<section id="follow-up" class="slide level2">
<h2>9. Follow up</h2>
<p>What are some further directions we could take this analysis?</p>
</section>
<section class="slide level2">

<ul>
<li>Investigate outstanding questions about quality and reliability of the data
<ul>
<li>eg, follow up with Stanford Open Policing Project about the difference in row counts</li>
<li>Fits with <em>epicycle of analysis</em>: checking expectations</li>
</ul></li>
<li>Break down our question into more fine-grained analyses
<ul>
<li>eg, the Oakland web site and report talk about policy changes; do we see changes by year in the data?</li>
<li>Fits with <em>epicycle of analysis</em>: refine and specify research questions</li>
</ul></li>
<li>Apply more sophisticated statistical analysis
<ul>
<li>eg, a regression model to control for age, gender, and other covariates</li>
<li>Fits with <em>phenomena development</em>: reducing data, eliminating noise, in order to identity local phenomena</li>
</ul></li>
</ul>
</section>
<section id="discussion-questions" class="slide level2">
<h2>Discussion questions</h2>
<ol type="1">
<li><p>Suppose you’ve conducted this EDA because you’re working with an activist organization that promotes defunding the police and prison abolition. Should you share the preliminary findings above with your organization contacts?</p></li>
<li><p>What influence would the following factors make to your answer?</p>
<ul>
<li>Funding: Whether you’re being paid as a consultant vs.&nbsp;volunteering your expertise</li>
<li>Values: Your own views about policing and prisons</li>
<li>Relationships: Whether you are friends with members of the activist organization and/or police</li>
<li>Communications: The degree to which you can control whether and how the organization will publish your preliminary findings</li>
<li>Timeliness: Whether these findings are relevant to a pending law or policy change</li>
</ul></li>
<li><p>What other factors should be taken into account as you decide whether to share your findings? Or not taken into account?</p></li>
<li><p>How has this “raw data” been shaped by the journey of the data to get to us?</p></li>
</ol>
</section>
<section id="lab" class="slide level2">
<h2>Lab</h2>
<p>The EDA lab walks you through an EDA of Covid-19 vaccine hesitancy data, looking at changes over time across racial-ethnic groups.</p>
<p><a href="https://github.com/data-science-methods/lab-4-eda" class="uri">https://github.com/data-science-methods/lab-4-eda</a></p>
</section>
<section id="references" class="slide level2 smaller scrollable">
<h2>References</h2>
<div class="footer footer-default">

</div>
<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-PengArtDataScience2016" class="csl-entry" role="listitem">
Peng, Roger D., and Elizabeth Matsui. 2016. <em>The <span>Art</span> of <span>Data Science</span>: <span>A Guide</span> for <span>Anyone Who Works</span> with <span>Data</span></em>. <span>Leanpub</span>. <a href="http://leanpub.com/artofdatascience">http://leanpub.com/artofdatascience</a>.
</div>
<div id="ref-PiersonLargescaleAnalysisRacial2020" class="csl-entry" role="listitem">
Pierson, Emma, Camelia Simoiu, Jan Overgoor, Sam Corbett-Davies, Daniel Jenson, Amy Shoemaker, Vignesh Ramachandran, et al. 2020. <span>“A Large-Scale Analysis of Racial Disparities in Police Stops Across the <span>United States</span>.”</span> <em>Nature Human Behaviour</em>, May, 1–10. <a href="https://doi.org/10.1038/s41562-020-0858-1">https://doi.org/10.1038/s41562-020-0858-1</a>.
</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="03-04-oakland-eda_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="03-04-oakland-eda_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="03-04-oakland-eda_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="03-04-oakland-eda_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="03-04-oakland-eda_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="03-04-oakland-eda_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="03-04-oakland-eda_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="03-04-oakland-eda_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="03-04-oakland-eda_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="03-04-oakland-eda_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1440,

        height: 1080,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>